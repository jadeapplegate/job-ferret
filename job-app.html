<head>
  <title>job-app</title>
</head>

<body>
<!-- display these templates -->
	<!-- 	{{>githubOauth}} -->
	{{>navbar}}

	<div id="dashboard">
		{{>addJobButton}}
		{{>addJobModal}}
		{{>interestList}}
		{{>pursuingList}}
		{{>bookmarklet}}
	</div>

	{{>jobOverview}}
</body>

<!-- responsive, fixed navbar at top of page -->
	<template name="navbar">
		<div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
		      </button>
		      <a class="brand" href="#">Job App</a>
		      <div class="nav-collapse collapse">
            <ul class="nav">
              <li class="active"><a href="#">Home</a></li>
              <li><a href="#about">About</a></li>
              <li><a href="#contact">Contact</a></li>
		          <li><a href="#signOut">Sign Out</a></li>
		        </ul>
		      </div>
		    </div>
		  </div>
		</div>
	</template>

	<template name="bookmarklet">
		<a href="javascript: (function(){if(window.myBookmarklet!==undefined){myBookmarklet();}else{document.body.appendChild(document.createElement('script')).src='http://jades-job-app.meteor.com/bookmarklet.js';}})();">View Sources</a>

		<a href="javascript: (function(){if(window.myBookmarklet!==undefined){myBookmarklet();}else{document.body.appendChild(document.createElement('script')).src='http://jades-job-app.meteor.com/bookmarklet2.js';}})();">Bookmark Job</a>

	</template>

<!-- on click, opens up a modal box which displays a form to add a new job -->
<template name="addJobButton">
	<div class="addJob">
		<button class="btn btn-primary btn-lg" data-toggle="modal" data-target="#addJobModal">
  		Add Job
		</button>
	</div>
</template>

<!-- modal with form for adding job of interest -->
<template name="addJobModal">
<div class="modal fade" id="addJobModal" tabindex="-1" role="dialog" aria-labelledby="addJobModal" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        <h4 class="modal-title" id="addJobModal">Add Job</h4>
      </div>
      <div class="modal-body">
      	<br>
				  <input name='company' type="text" placeholder="Company"/>
				  <input name='title' type="text" placeholder="Position Title"/>
				  <input name='link' type="text" placeholder="Link"/>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
        <button id="addJob" type="button" class="btn btn-primary" data-dismiss="modal">Save</button>
      </div>
    </div>
  </div>
</div>
</template>

<!-- appends list of all jobs of interest -->
<template name="interestList">
	<h3>All Jobs of Interest</h3>
	{{#each jobs}}
		<div>
			<a href="{{link}}">{{title}} at {{company}}</a>
				<button class="btn btn-xs btn-danger delete" data-id={{_id}}>Delete</button>
			<!-- on click, opens up a modal box which displays a form -->
			<button class="btn btn-xs btn-primary pursue" data-id={{_id}} data-toggle="modal" data-target="#pursuingModal-{{_id}}">Pursue</button>
		</div>
		<div class="modal fade" id="pursuingModal-{{_id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
		  <div class="modal-dialog">
		    <div class="modal-content">
		      <div class="modal-header">
		        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		        <h4 class="modal-title">Add More Information</h4>
		      </div>
		      <div class="modal-body">
			  	  <input name='link' type="text" class="span6 input-large" placeholder="Link" value={{link}} />
						<input name='title' type="text" placeholder="Position Title" value={{title}} />
						<input name='company' type="text" placeholder="Company" value={{company}} />
						<input name='contact_name' type="text" placeholder="Contact Name"/>
						<input name='contact_email' type="text" placeholder="Contact Email"/>
						<input name='contact_phone' type="text" placeholder="Contact Phone"/><br>
						<div class="btn-group" >
						  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Min Salary<span class="caret"></span>
					  	</button>
						  <ul class="min_salary_dropdown dropdown-menu" role="menu">
						  	<li><a href="#">$50,000</a></li>
		        	  <li><a href="#">$60,000</a></li>
			          <li><a href="#">$70,000</a></li>
		  	        <li><a href="#">$80,000</a></li>
		    	      <li><a href="#">$90,000</a></li>
		      	    <li><a href="#">$100,000</a></li>
		        	  <li><a href="#">$110,000</a></li>
		        	  <li><a href="#">$120,000</a></li>
		    	    </ul>
		 	        <input name="min_salary" type="text" id="min_salary" class="form-control">
						</div>
						<br>
						<div class="btn-group">
						  <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">Max Salary<span class="caret"></span>
						  </button>
						  <ul class="max_salary_dropdown dropdown-menu" role="menu">
			          <li><a href="#">$80,000</a></li>
			          <li><a href="#">$90,000</a></li>
			          <li><a href="#">$100,000</a></li>
			          <li><a href="#">$110,000</a></li>
			          <li><a href="#">$120,000</a></li>
			          <li><a href="#">$130,000</a></li>
			          <li><a href="#">$140,000</a></li>
			        </ul>
			        <input name="max_salary" type="text" id="max_salary" class="form-control">
			      </div>	
						<div class="requirements_checkbox">
							 <h5>Application Requirements (select all that apply)</h5>
								<input type="checkbox" name="resume">Resume<br>
								<input type="checkbox" name="cover_letter">Cover Letter<br>
								<input type="checkbox" name="portfolio">Portfolio Link<br>
								<input type="checkbox" name="code_sample">Code Sample<br>
			      </div>
			      <div class="modal-footer">
		  	      <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
		    	    <button data-id={{_id}} type="button" class="pursue_job btn btn-primary" data-dismiss="modal">Save</button>
	      		</div>
	  		  </div>
	 		  </div>
			</div>
		</div>
	{{/each}}
</template>

<!-- appends list of all jobs pursuing -->
<template name="pursuingList">
	<h3>All Pursuing</h3>
	{{#each jobs}}
		<div>
			<a href="{{link}}">{{title}} at {{company}}</a>
			<button class="btn btn-xs btn-danger delete" data-id={{_id}}>Delete</button>
			<button class="btn btn-primary btn-lg details" data-id={{_id}}>Details</button>
		</div>
	{{/each}}
</template>


<template name="position_requirements">
  <li> Requirements: 
	{{format_position_requirements this }}
	</li>  
</template>

<!-- hide other page elements and display the following job overview -->
<template name="jobOverview">
	<!-- status bar???????? -->
	<button class="btn btn-primary btn-lg back" data-id={{_id}}>Back</button>

	{{#each jobs}}
		<div class="job-details hidden" id="details-{{this._id}}">
			<h3>Position Information</h3>
			<ul>
				<li><a href="{{this.link}}">{{this.title}} at {{this.company}}</a></li>
				<li>Contact: {{this.contact_name}}: {{this.contact_email}}, {{this.contact_phone}}</li>
				<li> Salary Range: {{this.min_salary}} to {{this.max_salary}}</li>
			 <!-- if any options (resume, cover_letter, portfolio, code_sample) were checked, then display here -->
			 <!-- 4 if statements for each one -->
			 {{> position_requirements}}
			</ul>

			<h3>Next Steps</h3>
			<input name='next_step' type="text" placeholder="Add next step"/>
			<button type="button" data-id={{this._id}} class="add_next_step btn btn-primary">Add Next Step</button>
			<ul>
				{{#each this.nextStep}}	
					<li>{{this.text}}</li> 
				{{/each}}
			</ul>

			<h3>Notes</h3>
			<!-- text field with save option, appends to page below the box -->
			<input name='note' type="text" placeholder="Add note here"/>
			<button type="button" data-id={{this._id}} class="add_note btn btn-primary">Add Note</button>
			<ul>
				{{#each this.note}}	
					<li>{{this}}</li>
				{{/each}}
			</ul>
		</div>
	{{/each}}
</template>

<!-- sign in with Github -->
<template name="githubOauth">
	{{#if currentUser}}
		<script>console.log(currentUser)</script>
	{{else}}
	<script>console.log(currentUser)</script>
		{{> loginButtons align="right"}}
	{{/if}}
</template>
